{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { DataService } from '../data.service';\nimport { HttpClient } from '@angular/common/http';\nimport { TypeResponse } from 'src/app/shared/model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../data.service\";\nimport * as i3 from \"@angular/router\";\nexport var ReportIssueComponent = /*#__PURE__*/(function () {\n  var ReportIssueComponent = /*#__PURE__*/function () {\n    function ReportIssueComponent(http, language) {\n      _classCallCheck(this, ReportIssueComponent);\n\n      this.http = http;\n      this.language = language;\n      this.serial_number = \"\";\n      this.locker_num = \"\";\n      this.locker_num_temp = \"\";\n      this.door_close = 1;\n    }\n\n    _createClass(ReportIssueComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.language.currentLanguage.subscribe(function (message) {\n          _this.lang = message;\n\n          if (_this.lang == \"thai\") {\n            _this.tothai();\n          } else {\n            _this.toeng();\n          }\n        }); // this.data.currentMessage.subscribe(message=> this.message = message);\n      }\n    }, {\n      key: \"onkeydownHandler\",\n      value: function onkeydownHandler(event) {\n        var _this2 = this;\n\n        if (event.key === \"Enter\" && this.door_close == 1) {\n          console.log(this.serial_number);\n\n          if (this.lang == \"thai\") {\n            document.getElementById(\"SubTitle\").innerHTML = \"กรุณารอซักครู่\";\n          } else {\n            document.getElementById(\"SubTitle\").innerHTML = \"Processing, please wait\";\n          }\n\n          this.http.get('https://smartlocker.azurewebsites.net/api/admin/barcode/' + this.serial_number).subscribe(function (data) {\n            detail = data;\n            console.log(detail);\n\n            if (detail != null) {\n              _this2.locker_num_temp = detail.locker.name.toString();\n              _this2.locker_num = _this2.locker_num_temp.substring(7);\n              console.log(\"locker number: \" + _this2.locker_num);\n\n              _this2.http.get(\"/lockers/open/\" + _this2.locker_num).subscribe(function (data) {\n                console.log(data); // this.door_close = 0;\n\n                if (_this2.lang == \"thai\") {\n                  document.getElementById(\"SubTitle\").innerHTML = \"ใส่อุปกรณ์ช่อง \" + _this2.locker_num;\n                } else {\n                  document.getElementById(\"SubTitle\").innerHTML = \"Return the item at locker \" + _this2.locker_num;\n                } // this.checkLocker(this.locker_num);\n\n\n                _this2.serial_number = \"\";\n              });\n            } else {\n              // alert(this.serial_number+\" : Not found\");\n              // document.getElementById(\"ScanSerial\").innerHTML = this.serial_number+\" : Not found. Please Scan other item.\"; \n              if (_this2.lang == \"thai\") {\n                document.getElementById(\"SubTitle\").innerHTML = \"ไม่พบข้อมูลอุปกรณ์ กรุณาอุปกรณ์อื่น\";\n              } else {\n                document.getElementById(\"SubTitle\").innerHTML = \"Item not found. Please Scan other item\";\n              }\n\n              _this2.serial_number = \"\";\n            }\n          });\n        } else if (this.door_close == 1) {\n          if (\"Shift\".includes(event.key)) {} else if (\"/\".includes(event.key)) {\n            this.serial_number = this.serial_number + \"-\";\n          } else {\n            this.serial_number = this.serial_number + event.key;\n          }\n        }\n      } // checkLocker(locker_num) {\n      //   // console.log(\"ASSD\" + locker_num);\n      //   delay(3000);\n      //   this.http.get(\"/lockers/checkclose/\" + locker_num).subscribe(\n      //     data => {\n      //       detail = data;\n      //       if (detail.result == 1) {\n      //         // alert(\"close\")\n      //         console.log('https://smartlocker.azurewebsites.net/api/admin/return/' + this.serial_number);\n      //         this.http.get<TypeResponse>('https://smartlocker.azurewebsites.net/api/admin/return/' + this.serial_number).subscribe();\n      //         // alert(\"Thank you for returning : \" + this.serial_number);\n      //         if (this.lang == \"thai\") {\n      //           document.getElementById(\"ScanSerial\").innerHTML = \"ขอบคุณ เชิญแสกนอุปกรณ์ถัดไป\";\n      //         }\n      //         else {\n      //           document.getElementById(\"ScanSerial\").innerHTML = \"Thank you.Scan other item \";\n      //         }\n      //         this.door_close = 1;\n      //         this.serial_number = \"\";\n      //       }\n      //       console.log(detail.categories);\n      //     }\n      //   )\n      // }\n\n    }, {\n      key: \"tothai\",\n      value: function tothai() {\n        document.getElementById(\"Title\").innerHTML = \"แจ้งปัญหา\";\n        document.getElementById(\"SubTitle\").innerHTML = \"อะไรเป็นปัญหาของคุณ แสกนบาร์โค๊ดเพื่อเพิ่มของ\";\n        document.getElementById(\"ItemIssue\").innerHTML = \"อุปกรณ์ทีปัญหา(ยังไม่พร้อมใช้งาน)\";\n        document.getElementById(\"ItemIsThere\").innerHTML = \"มีอุปกรณ์ในช่องแต่ยืมไม่ได้\";\n        document.getElementById(\"addUser\").innerHTML = \"เพิ่มผู้ใช้\";\n      }\n    }, {\n      key: \"toeng\",\n      value: function toeng() {\n        document.getElementById(\"addUser\").innerHTML = \"Add User\";\n        document.getElementById(\"Title\").innerHTML = \"Report Issue\";\n        document.getElementById(\"SubTitle\").innerHTML = \"what is the problem?\";\n        document.getElementById(\"ItemIssue\").innerHTML = \"Item has an issue (Not Available)\";\n        document.getElementById(\"ItemIsThere\").innerHTML = \"Item is there, But can't Borrow\";\n      }\n    }]);\n\n    return ReportIssueComponent;\n  }();\n\n  ReportIssueComponent.ɵfac = function ReportIssueComponent_Factory(t) {\n    return new (t || ReportIssueComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DataService));\n  };\n\n  ReportIssueComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReportIssueComponent,\n    selectors: [[\"app-report-issue\"]],\n    hostBindings: function ReportIssueComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown\", function ReportIssueComponent_keydown_HostBindingHandler($event) {\n          return ctx.onkeydownHandler($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 21,\n    vars: 2,\n    consts: [[1, \"option-page\"], [1, \"topic-container\"], [\"id\", \"Title\", 1, \"topic-title\"], [\"id\", \"SubTitle\", 1, \"topic-sub\"], [1, \"option-wrapper\"], [1, \"option-opacity-gradient\"], [1, \"option-container\"], [1, \"option\"], [1, \"option-text\"], [\"id\", \"ItemIssue\", 1, \"text-main\", 2, \"color\", \"rgb(182, 182, 182)\"], [1, \"option\", 3, \"routerLink\"], [\"id\", \"ItemIsThere\", 1, \"text-main\"], [\"id\", \"addUser\", 1, \"text-main\"]],\n    template: function ReportIssueComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵtext(3, \"Report Issue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtext(5, \"what is the problem? Scan Barcode to add Items \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelement(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"div\", 9);\n        i0.ɵɵtext(12, \"Item has an issue (Not Available)\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"div\", 10)(14, \"div\", 8)(15, \"div\", 11);\n        i0.ɵɵtext(16, \"Item is there, But can't Borrow\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 10)(18, \"div\", 8)(19, \"div\", 12);\n        i0.ɵɵtext(20, \"Add User\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"routerLink\", \"/emergency-return\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", \"/add-User\");\n      }\n    },\n    dependencies: [i3.RouterLink]\n  });\n  return ReportIssueComponent;\n})();\nvar detail;","map":null,"metadata":{},"sourceType":"module"}