{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LocationResponse, LocationCountry, LocationSite, LocationContainer, LocationLocker } from 'src/app/shared/model';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction ItemFilterComponent_div_1_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var country_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", country_r4.country.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(country_r4.country.name);\n  }\n}\n\nfunction ItemFilterComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"label\", 3);\n    i0.ɵɵtext(2, \"COUNTRY\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function ItemFilterComponent_div_1_Template_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      var ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.countryId = $event);\n    })(\"change\", function ItemFilterComponent_div_1_Template_select_change_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      var ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.changeParams());\n    });\n    i0.ɵɵelementStart(4, \"option\", 5);\n    i0.ɵɵtext(5, \"All\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ItemFilterComponent_div_1_option_6_Template, 2, 2, \"option\", 8);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.countryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngValue\", -1)(\"selected\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.locations.countries);\n  }\n}\n\nfunction ItemFilterComponent_ng_container_8_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var site_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", site_r9.site.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(site_r9.site.name);\n  }\n}\n\nfunction ItemFilterComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ItemFilterComponent_ng_container_8_option_1_Template, 2, 2, \"option\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sites);\n  }\n}\n\nfunction ItemFilterComponent_ng_container_15_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var container_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", container_r11.container.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(container_r11.container.name);\n  }\n}\n\nfunction ItemFilterComponent_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ItemFilterComponent_ng_container_15_option_1_Template, 2, 2, \"option\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.containers);\n  }\n}\n\nvar _c0 = function _c0(a0) {\n  return {\n    \"disabled\": a0\n  };\n};\n\nexport var ItemFilterComponent = /*#__PURE__*/(function () {\n  var ItemFilterComponent = /*#__PURE__*/function () {\n    function ItemFilterComponent(http, _route, _router) {\n      _classCallCheck(this, ItemFilterComponent);\n\n      this.http = http;\n      this._route = _route;\n      this._router = _router;\n      this.countryId = -1;\n      this.siteId = -1;\n      this.containerId = -1;\n      this.lockerId = -1;\n      this.countries = null;\n      this.sites = null;\n      this.containers = null;\n      this.lockers = null;\n      this.activeCountry = null;\n      this.activeSite = null;\n      this.activeContainer = null; // this.http = new HttpClient(handler);\n    }\n\n    _createClass(ItemFilterComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.fetchCountires();\n      }\n    }, {\n      key: \"fetchCountires\",\n      value: function fetchCountires() {\n        var _this = this;\n\n        var endpoint = \"https://smartlocker20220922110147.azurewebsites.net/api/online/browse-locations\";\n        console.log(\"Fetching containers...\", endpoint);\n        this.http.get(endpoint).subscribe(function (data) {\n          _this.locations = data;\n\n          _this._route.queryParams.subscribe(function (queries) {\n            _this.countryId = queries.countryId ? parseInt(queries.countryId) : -1;\n            _this.siteId = queries.siteId ? parseInt(queries.siteId) : -1;\n            _this.containerId = queries.containerId ? parseInt(queries.containerId) : -1;\n\n            var country = _this.locations.countries.find(function (x) {\n              return x.country.id == _this.countryId;\n            });\n\n            if (country) {\n              _this.sites = country.sites;\n            } else {\n              _this.siteId = -1;\n              _this.sites = [];\n            }\n\n            var site = _this.sites.find(function (x) {\n              return x.site.id == _this.siteId;\n            });\n\n            if (site) {\n              _this.containers = site.containers;\n            } else {\n              _this.containerId = -1;\n              _this.containers = [];\n            }\n\n            _this.changeParams();\n          });\n        });\n      }\n    }, {\n      key: \"changeParams\",\n      value: function changeParams() {\n        var countryId = this.countryId != -1 ? this.countryId : undefined;\n        var siteId = this.siteId != -1 ? this.siteId : undefined;\n        var containerId = this.containerId != -1 ? this.containerId : undefined;\n\n        this._router.navigate([], {\n          relativeTo: this._route,\n          queryParams: {\n            countryId: countryId,\n            siteId: siteId,\n            containerId: containerId\n          },\n          queryParamsHandling: 'merge'\n        });\n      }\n    }]);\n\n    return ItemFilterComponent;\n  }();\n\n  ItemFilterComponent.ɵfac = function ItemFilterComponent_Factory(t) {\n    return new (t || ItemFilterComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ItemFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemFilterComponent,\n    selectors: [[\"app-item-filter\"]],\n    decls: 16,\n    vars: 15,\n    consts: [[1, \"site-filter\"], [\"class\", \"filter-container\", 4, \"ngIf\"], [1, \"filter-container\", 3, \"ngClass\"], [\"for\", \"\", 1, \"filter-label\"], [\"name\", \"\", \"id\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"ngValue\", \"selected\"], [4, \"ngIf\"], [1, \"filter-container\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngValue\"]],\n    template: function ItemFilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ItemFilterComponent_div_1_Template, 7, 4, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\", 3);\n        i0.ɵɵtext(4, \"SITE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemFilterComponent_Template_select_ngModelChange_5_listener($event) {\n          return ctx.siteId = $event;\n        })(\"change\", function ItemFilterComponent_Template_select_change_5_listener() {\n          return ctx.changeParams();\n        });\n        i0.ɵɵelementStart(6, \"option\", 5);\n        i0.ɵɵtext(7, \"All\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, ItemFilterComponent_ng_container_8_Template, 2, 1, \"ng-container\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 2)(10, \"label\", 3);\n        i0.ɵɵtext(11, \"CONTAINER\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemFilterComponent_Template_select_ngModelChange_12_listener($event) {\n          return ctx.containerId = $event;\n        })(\"change\", function ItemFilterComponent_Template_select_change_12_listener() {\n          return ctx.changeParams();\n        });\n        i0.ɵɵelementStart(13, \"option\", 5);\n        i0.ɵɵtext(14, \"All\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, ItemFilterComponent_ng_container_15_Template, 2, 1, \"ng-container\", 6);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.locations);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx.countryId == -1));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.siteId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngValue\", -1)(\"selected\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.sites);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c0, ctx.siteId == -1));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.containerId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngValue\", -1)(\"selected\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.containers);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\".site-filter[_ngcontent-%COMP%]{display:flex;margin-bottom:3rem}.site-filter[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:1rem}.site-filter[_ngcontent-%COMP%]   .filter-container.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.site-filter[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;color:#696969;margin-bottom:.25rem;font-weight:500}.site-filter[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid rgb(196,196,196);padding:.3rem 1rem .2rem .3rem;font-family:EMPrint;font-size:1rem;color:#0c69b0}\"]\n  });\n  return ItemFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}