{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpEvent, HttpHandler, HttpRequest, HttpHeaders } from '@angular/common/http';\nimport { DataService } from './data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./data.service\";\nexport var AuthInterceptorService = /*#__PURE__*/(function () {\n  var AuthInterceptorService = /*#__PURE__*/function () {\n    function AuthInterceptorService(data) {\n      _classCallCheck(this, AuthInterceptorService);\n\n      this.data = data;\n    }\n\n    _createClass(AuthInterceptorService, [{\n      key: \"intercept\",\n      value: function intercept(request, next) {\n        this.data.currentToken.subscribe(function (message) {\n          // console.log('token :' + message)\n          request = request.clone({\n            setHeaders: {\n              Authorization: 'Bearer ' + message\n            },\n            // setHeaders: { Authorization: 'Bearer ' + request.headers[\"X-MS-TOKEN-AAD-ACCESS-TOKEN\"] },\n            withCredentials: true\n          });\n        });\n        return next.handle(request);\n      }\n    }]);\n\n    return AuthInterceptorService;\n  }();\n\n  AuthInterceptorService.ɵfac = function AuthInterceptorService_Factory(t) {\n    return new (t || AuthInterceptorService)(i0.ɵɵinject(i1.DataService));\n  };\n\n  AuthInterceptorService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthInterceptorService,\n    factory: AuthInterceptorService.ɵfac\n  });\n  return AuthInterceptorService;\n})();\nexport var AddHeaderInterceptor = /*#__PURE__*/function () {\n  function AddHeaderInterceptor() {\n    _classCallCheck(this, AddHeaderInterceptor);\n  }\n\n  _createClass(AddHeaderInterceptor, [{\n    key: \"intercept\",\n    value: function intercept(req, next) {\n      // Clone the request to add the new header\n      var pwd = \"zFA5In7bV1Gr3b7Uq7ldZR276\";\n\n      if (req.url.includes(\"smartlocker\")) {\n        var clonedRequest = req.clone({\n          headers: new HttpHeaders({\n            'Content-Type': 'application/json',\n            'password': pwd\n          })\n        });\n        return next.handle(clonedRequest); // clonedRequest.headers.append('Content-Type','application/json');\n      } else {\n        return next.handle(req.clone({\n          headers: new HttpHeaders({\n            // 'Access-Control-Allow-Origin' : '*',\n            'Content-Type': 'application/json' // 'password': pwd\n\n          }),\n          withCredentials: false\n        }));\n      }\n    }\n  }]);\n\n  return AddHeaderInterceptor;\n}();","map":null,"metadata":{},"sourceType":"module"}