{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpResponse } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nexport var AddHeaderInterceptor = /*#__PURE__*/function () {\n  function AddHeaderInterceptor() {\n    _classCallCheck(this, AddHeaderInterceptor);\n\n    this.cache = new Map();\n    this.token = \"\";\n  }\n\n  _createClass(AddHeaderInterceptor, [{\n    key: \"intercept\",\n    value: function intercept(req, next) {\n      var _this = this;\n\n      // Clone the request to add the new header\n      if (req.url.includes(\"token\")) {\n        return next.handle(req).pipe(map(function (event) {\n          if (event instanceof HttpResponse) {\n            // console.log(event.clone().body.secret);\n            _this.token = event.clone().body.secret;\n          }\n\n          return event;\n        }));\n      }\n\n      var clonedRequest = req.clone({\n        headers: req.headers.append('Authorization', 'Bearer ' + this.token)\n      }); // Pass the cloned request instead of the original request to the next handle\n\n      return next.handle(req); // return next.handle(clonedRequest);\n    }\n  }]);\n\n  return AddHeaderInterceptor;\n}();","map":null,"metadata":{},"sourceType":"module"}