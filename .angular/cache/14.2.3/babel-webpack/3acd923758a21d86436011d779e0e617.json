{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient } from '@angular/common/http';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { TypeResponse } from 'src/app/shared/model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nvar _c0 = function _c0(a0) {\n  return {\n    \"active\": a0\n  };\n};\n\nfunction CategoryBrowserComponent_div_0_div_6_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵlistener(\"click\", function CategoryBrowserComponent_div_0_div_6_div_3_Template_div_click_1_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r6);\n      var subcategory_r4 = restoredCtx.$implicit;\n      var ctx_r5 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r5.addSubcategoryParams(subcategory_r4.subcategory.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var subcategory_r4 = ctx.$implicit;\n    var ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, ctx_r3.activeSubcategoryId == subcategory_r4.subcategory.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(subcategory_r4.subcategory.name);\n  }\n}\n\nfunction CategoryBrowserComponent_div_0_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function CategoryBrowserComponent_div_0_div_6_Template_div_click_1_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r8);\n      var category_r2 = restoredCtx.$implicit;\n      var ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.addCategoryParams(category_r2.category.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CategoryBrowserComponent_div_0_div_6_div_3_Template, 3, 4, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var category_r2 = ctx.$implicit;\n    var ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r1.activeCategoryId == category_r2.category.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r2.category.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", category_r2.subcategories);\n  }\n}\n\nfunction CategoryBrowserComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n    i0.ɵɵtext(2, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function CategoryBrowserComponent_div_0_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      var ctx_r9 = i0.ɵɵnextContext();\n      ctx_r9.addCategoryParams(null);\n      return i0.ɵɵresetView(ctx_r9.addSubcategoryParams(null));\n    });\n    i0.ɵɵtext(5, \"All\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, CategoryBrowserComponent_div_0_div_6_Template, 4, 5, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, ctx_r0.activeCategoryId == null && ctx_r0.activeSubcategoryId == null));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.types.categories);\n  }\n}\n\nexport var CategoryBrowserComponent = /*#__PURE__*/(function () {\n  var CategoryBrowserComponent = /*#__PURE__*/function () {\n    function CategoryBrowserComponent(http, _route, _router) {\n      _classCallCheck(this, CategoryBrowserComponent);\n\n      this.http = http;\n      this._route = _route;\n      this._router = _router;\n      this.activeCategoryId = null;\n      this.activeSubcategoryId = null; // this.http = new HttpClient(handler);\n    }\n\n    _createClass(CategoryBrowserComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.http.get('https://smartlocker20220922110147.azurewebsites.net/api/online/browse-types').subscribe(function (data) {\n          _this.types = data;\n\n          _this._route.queryParams.subscribe(function (queries) {\n            if (queries.categoryId) _this.activeCategoryId = queries.categoryId;\n            if (queries.subcategoryId) _this.activeSubcategoryId = queries.subcategoryId;\n          });\n        });\n      }\n    }, {\n      key: \"addCategoryParams\",\n      value: function addCategoryParams(id) {\n        this.activeCategoryId = id;\n        this.activeSubcategoryId = null;\n        this.changeParams();\n      }\n    }, {\n      key: \"addSubcategoryParams\",\n      value: function addSubcategoryParams(id) {\n        this.activeCategoryId = null;\n        this.activeSubcategoryId = id;\n        this.changeParams();\n      }\n    }, {\n      key: \"changeParams\",\n      value: function changeParams() {\n        var queryParams = {\n          subcategoryId: this.activeSubcategoryId,\n          categoryId: this.activeCategoryId\n        };\n\n        this._router.navigate([], {\n          relativeTo: this._route,\n          queryParams: queryParams,\n          queryParamsHandling: 'merge'\n        });\n      }\n    }]);\n\n    return CategoryBrowserComponent;\n  }();\n\n  CategoryBrowserComponent.ɵfac = function CategoryBrowserComponent_Factory(t) {\n    return new (t || CategoryBrowserComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  CategoryBrowserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CategoryBrowserComponent,\n    selectors: [[\"app-category-browser\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"category-container\", 4, \"ngIf\"], [1, \"category-container\"], [1, \"category-header\"], [1, \"category-item\"], [1, \"category-link\", 3, \"ngClass\", \"click\"], [\"class\", \"category-item\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"subcategory-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"subcategory-container\"], [1, \"subcategory-link\", 3, \"ngClass\", \"click\"]],\n    template: function CategoryBrowserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CategoryBrowserComponent_div_0_Template, 7, 4, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.types);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf],\n    styles: [\".category-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:gray}.category-container[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.5rem;color:#696969}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{font-size:.9rem}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-link[_ngcontent-%COMP%]{line-height:1.5rem;cursor:pointer}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-link.active[_ngcontent-%COMP%]{color:#2196f3;font-weight:600;text-decoration:underline}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .subcategory-container[_ngcontent-%COMP%]{margin-left:.5rem;padding-left:.5rem;border-left:1px solid rgba(0,0,0,.1)}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .subcategory-container[_ngcontent-%COMP%]   .subcategory-link[_ngcontent-%COMP%]{line-height:1.5rem;cursor:pointer}.category-container[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .subcategory-container[_ngcontent-%COMP%]   .subcategory-link.active[_ngcontent-%COMP%]{color:#2196f3;font-weight:600;text-decoration:underline}\"]\n  });\n  return CategoryBrowserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}