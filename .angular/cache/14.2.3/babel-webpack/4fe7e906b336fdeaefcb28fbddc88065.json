{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CountryResponse, SiteResponse, ContainerResponse } from '../../../../../../src/app/shared/model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../item-filter/item-filter.component\";\nimport * as i6 from \"ngx-moment\";\n\nfunction ItemBrowserComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Showing \", ctx_r0.catalog.total, \" results\");\n  }\n}\n\nvar _c0 = function _c0(a0) {\n  return {\n    \"unavailable\": a0\n  };\n};\n\nfunction ItemBrowserComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelement(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"div\", 9)(3, \"a\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 12);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"amDuration\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 13);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var item_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c0, item_r3.available == 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-image\", \"url(https://smartlocker20220922110147.azurewebsites.net/api/images/\" + item_r3.item.images[0] + \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/item/\", item_r3.item.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r3.item.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", item_r3.category.name, \" / \", item_r3.subcategory.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(9, 10, item_r3.item.defaultDuration, \"seconds\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", \"available-\" + item_r3.available);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", item_r3.available, \" units available\");\n  }\n}\n\nfunction ItemBrowserComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ItemBrowserComponent_div_4_div_1_Template, 12, 15, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.catalog.items);\n  }\n}\n\nexport var ItemBrowserComponent = /*#__PURE__*/(function () {\n  var ItemBrowserComponent = /*#__PURE__*/function () {\n    function ItemBrowserComponent(http, _route, _router) {\n      _classCallCheck(this, ItemBrowserComponent);\n\n      this.http = http;\n      this._route = _route;\n      this._router = _router;\n      this.containers = null;\n      this.activeCategoryId = -1;\n      this.activeSubcategoryId = -1;\n      this.activeSiteId = -1;\n      this.activeContainerId = -1;\n      this.activeCountryId = -1;\n      this.activeCountry = new CountryResponse();\n      this.activeSite = new SiteResponse();\n      this.activeContainer = new ContainerResponse();\n      this.keyword = '';\n      this.queryParams = new BrowseItemParams(); // this.http = new HttpClient(handler);\n    }\n\n    _createClass(ItemBrowserComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this._route.queryParams.subscribe(function (queries) {\n          _this.queryParams.categoryId = queries.categoryId ? queries.categoryId : undefined;\n          _this.queryParams.subcategoryId = queries.subcategoryId ? queries.subcategoryId : undefined;\n          _this.queryParams.countryId = queries.countryId ? queries.countryId : undefined;\n          _this.queryParams.siteId = queries.siteId ? queries.siteId : undefined;\n          _this.queryParams.containerId = queries.containerId ? queries.containerId : undefined;\n          _this.queryParams.keyword = queries.keyword ? queries.keyword : undefined;\n          var endpoint = \"https://smartlocker20220922110147.azurewebsites.net/api/online/items\";\n          console.log(\"Fetching models...\", endpoint, {\n            params: _this.queryParams\n          });\n\n          _this.http.get(endpoint, {\n            params: JSON.parse(JSON.stringify(_this.queryParams))\n          }).subscribe(function (data) {\n            return _this.catalog = data;\n          });\n        });\n      }\n    }, {\n      key: \"getFirstModelImage\",\n      value: function getFirstModelImage(model) {\n        if (model.images.length > 0) {\n          return 'https://smartlocker20220922110147.azurewebsites.net/api/images/' + model.images[0];\n        } else {\n          return 'https://www.independentmediators.co.uk/wp-content/uploads/2016/02/placeholder-image.jpg';\n        }\n      }\n    }, {\n      key: \"changeParams\",\n      value: function changeParams() {\n        this._router.navigate([], {\n          relativeTo: this._route,\n          queryParams: {\n            keyword: this.queryParams.keyword\n          },\n          queryParamsHandling: 'merge'\n        });\n      }\n    }]);\n\n    return ItemBrowserComponent;\n  }();\n\n  ItemBrowserComponent.ɵfac = function ItemBrowserComponent_Factory(t) {\n    return new (t || ItemBrowserComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ItemBrowserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemBrowserComponent,\n    selectors: [[\"app-item-browser\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[1, \"search-input\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\", \"keyup\"], [\"class\", \"model-count\", 4, \"ngIf\"], [\"class\", \"model-list-container\", 4, \"ngIf\"], [1, \"model-count\"], [1, \"model-list-container\"], [\"class\", \"model-container\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"model-container\", 3, \"ngClass\"], [1, \"model-image\"], [1, \"model-text\"], [\"queryParamsHandling\", \"preserve\", 1, \"model-name\", 3, \"routerLink\"], [1, \"model-category\"], [1, \"model-duration\"], [1, \"model-availability\", 3, \"ngClass\"]],\n    template: function ItemBrowserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemBrowserComponent_Template_input_ngModelChange_1_listener($event) {\n          return ctx.queryParams.keyword = $event;\n        })(\"keyup\", function ItemBrowserComponent_Template_input_keyup_1_listener() {\n          return ctx.changeParams();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(2, \"app-item-filter\");\n        i0.ɵɵtemplate(3, ItemBrowserComponent_div_3_Template, 2, 1, \"div\", 2);\n        i0.ɵɵtemplate(4, ItemBrowserComponent_div_4_Template, 2, 1, \"div\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.queryParams.keyword);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.catalog);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.catalog);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i2.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.ItemFilterComponent, i6.DurationPipe],\n    styles: [\".search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid lightgrey;font-family:EMPrint;font-size:1rem;color:#696969;box-sizing:border-box}.model-count[_ngcontent-%COMP%]{font-size:.8rem;color:#696969;margin-bottom:.5rem}.model-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:1rem}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]{display:flex}.model-list-container[_ngcontent-%COMP%]   .model-container.unavailable[_ngcontent-%COMP%]{opacity:.5}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-image[_ngcontent-%COMP%]{border-radius:10px;background-color:#e4e4e4;width:75px;height:75px;flex:0 0 auto;background-size:cover;background-position:center center}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]{margin-left:.75rem}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%]{font-size:1rem;color:#696969;line-height:1.15rem;font-weight:500}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-category[_ngcontent-%COMP%]{color:#696969;font-size:.9rem;line-height:1.15rem}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-duration[_ngcontent-%COMP%]{color:gray;font-size:.9rem;line-height:1.15rem}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-availability[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin-top:.25rem;color:#4caf50;line-height:1.15rem}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-availability.available-1[_ngcontent-%COMP%]{color:#f3b600}.model-list-container[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]   .model-text[_ngcontent-%COMP%]   .model-availability.available-0[_ngcontent-%COMP%]{color:gray}\"]\n  });\n  return ItemBrowserComponent;\n})();\nexport var BrowseItemParams = /*#__PURE__*/_createClass(function BrowseItemParams() {\n  _classCallCheck(this, BrowseItemParams);\n\n  this.subcategoryId = undefined;\n  this.categoryId = undefined;\n  this.countryId = undefined;\n  this.siteId = undefined;\n  this.containerId = undefined;\n  this.keyword = undefined;\n});","map":null,"metadata":{},"sourceType":"module"}