{"ast":null,"code":"import _classCallCheck from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nsuwanw/Desktop/smartlocker-sp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { SiteResponse, ContainerResponse, ItemDetailResponse, ItemDetailAvailabilityContainer, EmployeeDTO } from '../../../../../src/app/shared/model';\nimport { DataService } from '../shared/data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../shared/data.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./availability/availability.component\";\nimport * as i6 from \"./loan/loan.component\";\nimport * as i7 from \"ngx-moment\";\n\nfunction ItemDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"h1\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.item.item.name);\n  }\n}\n\nfunction ItemDetailComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function ItemDetailComponent_div_1_div_2_Template_div_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r6);\n      var image_r4 = restoredCtx.$implicit;\n      var ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.setActiveImage(image_r4));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var image_r4 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"background-image\", \"url(https://smartlocker20220922110147.azurewebsites.net/api/images/\" + image_r4 + \")\");\n  }\n}\n\nfunction ItemDetailComponent_div_1_app_loan_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loan\", 15);\n  }\n\n  if (rf & 2) {\n    var loan_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"loan\", loan_r7);\n  }\n}\n\nfunction ItemDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵtemplate(2, ItemDetailComponent_div_1_div_2_Template, 1, 2, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 6);\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"div\", 8)(6, \"div\", 9);\n    i0.ɵɵtext(7, \"MODEL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 10);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9);\n    i0.ɵɵtext(12, \"CATEGORY\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 10);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 8)(16, \"div\", 9);\n    i0.ɵɵtext(17, \"SUBCATEGORY\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 10);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 8)(21, \"div\", 9);\n    i0.ɵɵtext(22, \"DURATION\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 10);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"amDuration\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 11);\n    i0.ɵɵelement(27, \"app-availability\", 12);\n    i0.ɵɵtemplate(28, ItemDetailComponent_div_1_app_loan_28_Template, 1, 1, \"app-loan\", 13);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.item.item.images);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-image\", \"url(https://smartlocker20220922110147.azurewebsites.net/api/images/\" + ctx_r1.activeImage + \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.item.item.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.item.item.category.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.item.item.subcategory.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(25, 10, ctx_r1.item.item.defaultDuration, \"seconds\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"availability\", ctx_r1.item.availability)(\"item\", ctx_r1.item.item);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.item.loans);\n  }\n}\n\nexport var ItemDetailComponent = /*#__PURE__*/(function () {\n  var ItemDetailComponent = /*#__PURE__*/function () {\n    function ItemDetailComponent(http, data, _route, _router) {\n      _classCallCheck(this, ItemDetailComponent);\n\n      this.http = http;\n      this.data = data;\n      this._route = _route;\n      this._router = _router;\n      this.item = null;\n      this.userInfo = null;\n      this.activeSiteId = -1;\n      this.activeContainerId = -1;\n      this.activeCountryId = -1;\n      this.activeCountry = new ItemDetailAvailabilityContainer();\n      this.activeSite = new SiteResponse();\n      this.activeContainer = new ContainerResponse();\n      this.username = \"\";\n      this.lastname = \"\";\n      this.displayName = \"\"; // this.http = new HttpClient(handler);\n    }\n\n    _createClass(ItemDetailComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.data.currentName.subscribe(function (message) {\n          return _this.username = message;\n        });\n        this.data.currentLastName.subscribe(function (message) {\n          return _this.lastname = message;\n        });\n        this.displayName = this.username + \" \" + this.lastname;\n        console.log(\"message: \" + this.displayName);\n        var headers = new HttpHeaders(); // this.http.get<EmployeeDTO>(`https://smartlocker20220922110147.azurewebsites.net/api/admin/finduser/name/${this.displayName}`).subscribe(data =>{\n        //   if(data != null){\n        //     this.userInfo = data;\n        //     headers = headers.set('Authorization', this.userInfo.badgeId);  \n        //   }\n        //   else{\n        //     headers = headers.set('Authorization', '1'); \n        //   }\n        // })\n        // headers = headers.set('Authorization', '1');  //temporary\n\n        this.itemId = this._route.snapshot.params.itemId;\n        this.http.get(\"https://smartlocker20220922110147.azurewebsites.net/api/online/items/\".concat(this.itemId), {\n          headers: headers\n        }).subscribe(function (data) {\n          _this.item = data;\n          console.log(data);\n\n          if (_this.item.item.images.length > 0) {\n            _this.activeImage = _this.item.item.images[0];\n          }\n\n          _this._route.queryParams.subscribe(function (queries) {\n            if (queries.countryId) _this.activeCountryId = queries.countryId;\n            if (queries.siteId) _this.activeSiteId = queries.siteId;\n\n            if (_this.activeCountryId > -1) {\n              _this.activeCountry = _this.item.availability.find(function (each) {\n                return each.country.id == _this.activeCountryId;\n              });\n            } // if (this.activeSiteId > -1) { this.activeSite = this.activeCountry.sites.find(each => each..id == this.activeSiteId)}\n\n          });\n        });\n      }\n    }, {\n      key: \"setActiveImage\",\n      value: function setActiveImage(imageId) {\n        this.activeImage = imageId;\n      }\n    }]);\n\n    return ItemDetailComponent;\n  }();\n\n  ItemDetailComponent.ɵfac = function ItemDetailComponent_Factory(t) {\n    return new (t || ItemDetailComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DataService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  ItemDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemDetailComponent,\n    selectors: [[\"app-item-detail\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"container item-name\", 4, \"ngIf\"], [\"class\", \"container item-viewer\", 4, \"ngIf\"], [1, \"container\", \"item-name\"], [1, \"container\", \"item-viewer\"], [1, \"item-image-list\"], [\"class\", \"item-image\", 3, \"background-image\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"item-image-viewer\"], [1, \"item-detail\"], [1, \"detail-group\"], [1, \"detail-title\"], [1, \"detail-body\"], [1, \"item-status\"], [3, \"availability\", \"item\"], [3, \"loan\", 4, \"ngFor\", \"ngForOf\"], [1, \"item-image\", 3, \"click\"], [3, \"loan\"]],\n    template: function ItemDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ItemDetailComponent_div_0_Template, 3, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, ItemDetailComponent_div_1_Template, 29, 13, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.item);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.item);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.AvailabilityComponent, i6.LoanComponent, i7.DurationPipe],\n    styles: [\".item-name[_ngcontent-%COMP%]{margin-top:4rem}.item-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:3rem;color:#333}.item-viewer[_ngcontent-%COMP%]{display:flex}.item-viewer[_ngcontent-%COMP%]   .item-image-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-viewer[_ngcontent-%COMP%]   .item-image-list[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:75px;height:75px;background-color:#fff;margin-bottom:1rem;flex:0 0 auto;background-position:center center;background-size:contain;border:1px solid #eee;background-repeat:no-repeat}.item-viewer[_ngcontent-%COMP%]   .item-image-viewer[_ngcontent-%COMP%]{width:500px;height:500px;background-color:#fff;margin-left:1rem;flex:0 0 auto;background-position:center center;background-size:contain;border:1px solid #eee;background-repeat:no-repeat}.item-viewer[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem}.item-viewer[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]   .detail-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.item-viewer[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]   .detail-group[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{font-size:.7rem;color:#8b8b8b;font-weight:500;line-height:1rem}.item-viewer[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]   .detail-group[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]{font-weight:500;color:#555}.item-viewer[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]{margin-left:2rem;flex:0 0 300px}\"]\n  });\n  return ItemDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}